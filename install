#!/usr/bin/env zsh

BASEDIR="$(cd "$(dirname "${ZSH_SOURCE[0]}")" && pwd)"

echo "Updating submodules..."
git submodule update --init --recursive --remote

echo "Linking files..."
ln -sfn ${BASEDIR}/vim/vim/ ~/.vim
ln -sfn ${BASEDIR}/vim/vimrc ~/.vimrc
ln -sfn ${BASEDIR}/vim/gvimrc ~/.gvimrc

ln -sfn ${BASEDIR}/zsh/zsh/ ~/.zsh
ln -sfn ${BASEDIR}/zsh/zprofile ~/.zprofile
ln -sfn ${BASEDIR}/zsh/zshenv ~/.zshenv
ln -sfn ${BASEDIR}/zsh/zshrc ~/.zshrc

ln -sfn ${BASEDIR}/tmux/tmux.conf ~/.tmux.conf

[ -d $HOME/.config/i3/ ] || mkdir -p $HOME/.config/i3
ln -sfnr ${BASEDIR}/i3/config ~/.config/i3/config
ln -sfnr ${BASEDIR}/i3/i3status.conf ~/.config/i3/i3status.conf
ln -sfnr ${BASEDIR}/i3/scripts ~/.config/i3/scripts
ln -sfnr ${BASEDIR}/i3/other/xinitrc ~/.xinitrc
ln -sfnr ${BASEDIR}/i3/other/Xresources ~/.Xresources
[ -d $HOME/.config/termite/ ] || mkdir -p $HOME/.config/termite
ln -sfnr ${BASEDIR}/i3/other/termite ~/.config/termite/config

ln -sfn ${BASEDIR}/git/gitconfig ~/.gitconfig
ln -sfn ${BASEDIR}/other/agignore ~/.agignore

echo "Installing Vim plugins ..."
echo | vim - +PlugInstall +qall

echo "Source Zsh files"
source ~/.zshrc

echo "Installing Fonts..."
git clone https://github.com/powerline/fonts.git ~/workspace/fonts/ && ~/workspace/fonts/install.sh
